webpackJsonp([8],{183:function(t,e,s){function r(t){o||s(244)}var o=!1,a=s(45)(s(245),s(250),r,null,null);a.options.__file="/Users/ransixi/Documents/ilikezu/ilikezu-web/src/views/CreateAddress.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] CreateAddress.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},192:function(t,e,s){"use strict";e.__esModule=!0;var r=s(6),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t}},193:function(t,e,s){function r(t){o||s(194)}var o=!1,a=s(45)(s(195),s(196),r,null,null);a.options.__file="/Users/ransixi/Documents/ilikezu/ilikezu-web/src/components/barTop.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] barTop.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},194:function(t,e){},195:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{text:{type:String,required:!0}},methods:{back:function(){this.$router.back()}}}},196:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bar-top"},[s("i",{staticClass:"iconfont icon-back",on:{click:t.back}}),t._v(" "),s("span",[t._v(t._s(t.text))])])},staticRenderFns:[]},t.exports.render._withStripped=!0},244:function(t,e){},245:function(t,e,s){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=s(7),a=r(o),n=s(6),i=r(n),d=s(23),c=r(d),l=s(192),u=r(l),p=s(193),f=r(p),m=s(246),h=r(m),v=s(29),I=s(46);e.default={data:function(){return{title:"新建收货人",type:"create",recordId:"",fetch:!1,popup:!1,params:{proId:"-1",cityId:"-1",disId:"-1"},formData:{proId:"",cityId:"",disId:"",address:"",contactName:"",contactNumber:""},addressSet:{proName:"",cityName:"",disName:""}}},components:{"bar-top":f.default,"address-selector":h.default},computed:(0,u.default)({},(0,I.mapState)(["addresses"]),{addressStr:function(){var t=this.addressSet;return(0,c.default)(t).map(function(e){return t[e]}).join("-").replace(/[-]{2, 3}/g,"-").replace(/^[-]{1,}|[-]{1,}$/g,"")}}),created:function(){var t=this;this.$nextTick(function(){/editAddress/.test(t.$route.path)?t.getAddress().then(function(){var e=t.$route.params.recordId,s=t.addresses.filter(function(t){return t.recordId===+e})[0];t.recordId=e,t.type="edit";var r=s.proId,o=s.cityId,a=s.disId,n=s.contactName,d=s.address,c=s.contactNumber;(0,i.default)(t.formData,{proId:r,cityId:o,disId:a,contactName:n,address:d,contactNumber:c}),(0,i.default)(t.params,{proId:r,cityId:o,disId:a}),t.fetch=!0}):(t.type,t.recordId="",t.fetch=!0)})},methods:{getAddress:function(){return this.$store.dispatch("GET_ADDRESS")},showPopUp:function(){this.popup=!0},handleClose:function(){this.popup=!1},validForm:function(){var t=this.formData;return!!(0,c.default)(t).every(function(e){return"proId"===e||"cityId"===e||"disId"===e?"-1"!==t[e]:!!t[e]})||"收货人信息填写不全"},submit:function(){var t=this,e=this.validForm(this.formData);if("string"==typeof e)return(0,v.errorTip)(e);var s="create"===this.type?this.formData:(0,i.default)({},this.formData,{recordId:this.recordId});this.$store.dispatch("UPDATE_ADDRESS",s).then(function(e){if(!e.isSuccess)return a.default.reject(e.msg);t.$router.back()}).catch(function(t){"string"==typeof t?(0,v.errorTip)(t):(0,v.errorTip)("更新地址失败")})},handleSelect:function(t){t[0]&&(this.formData.proId=String(t[0].recordId),this.addressSet.proName=t[0].name),t[1]&&(this.formData.cityId=String(t[1].recordId),this.addressSet.cityName=t[1].name),t[2]&&(this.formData.disId=String(t[2].recordId),this.addressSet.disName=t[2].name)}}}},246:function(t,e,s){function r(t){o||s(247)}var o=!1,a=s(45)(s(248),s(249),r,null,null);a.options.__file="/Users/ransixi/Documents/ilikezu/ilikezu-web/src/components/addressSelector.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] addressSelector.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},247:function(t,e){},248:function(t,e,s){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=s(23),a=r(o),n=s(47),i=r(n),d=s(16),c=r(d),l=s(192),u=r(l),p=s(46),f=[{recordId:"-1",name:"选择省份"}],m=[{recordId:"-1",name:"选择城市"}],h=[{recordId:"-1",name:"选择区县"}];e.default={data:function(){return{slots:[{flex:1,values:[].concat(f),className:"slot1",textAlign:"right",defaultIndex:0},{divider:!0,content:"-",className:"slot2"},{flex:1,values:[].concat(m),className:"slot3",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:[].concat(h),className:"slot3",textAlign:"left"}],lastProId:this.proId,lastCityId:this.cityId}},props:{proId:[String,Number],cityId:[String,Number],disId:[String,Number],popup:Boolean,fetch:Boolean},computed:(0,u.default)({},(0,p.mapState)(["proviences","cities","dises"]),{isPopUp:function(){return this.popup}}),watch:{fetch:function(t){!0===t&&this.getAddressList()},proviences:function(t){var e=this;console.log(this.proId),t&&Array.isArray(t)&&t.length&&(this.slots[0].values=[].concat(f,(0,c.default)(t)),this.slots[0].defaultIndex=this.slots[0].values.findIndex(function(t){return t.recordId===+e.proId}))},cities:function(t){var e=this;t&&"object"===(void 0===t?"undefined":(0,i.default)(t))&&(0,a.default)(t).length>1&&(this.slots[2].values=[].concat(m,(0,c.default)(t[this.proId])),this.slots[2].defaultIndex=this.slots[2].values.findIndex(function(t){return t.recordId==e.cityId}))},dises:function(t){var e=this;t&&"object"===(void 0===t?"undefined":(0,i.default)(t))&&(0,a.default)(t).length>1&&(this.slots[4].values=[].concat(h,(0,c.default)(t[this.cityId])),this.slots[4].defaultIndex=this.slots[4].values.findIndex(function(t){return t.recordId==e.disId}))}},created:function(){},methods:{getAddressList:function(){this.$store.dispatch("GET_ADDRESS_LIST",{type:"pro"}),this.$store.dispatch("GET_ADDRESS_LIST",{type:"city"}),this.$store.dispatch("GET_ADDRESS_LIST",{type:"dis"})},onValuesChange:function(t,e){return this.$emit("select",e),0!==this.proviences.length&&(!((0,a.default)(this.cities).length<=1)&&(!((0,a.default)(this.dises).length<=1)&&(console.log(e),void(e[0]&&e[0].recordId!==+this.lastProId?(this.lastProId=e[0].recordId,this.slots[2].values=[].concat(m,(0,c.default)(this.cities[e[0].recordId]))):e[1]&&e[1].recordId!==+this.lastCityId&&(this.lastCityId=e[1].recordId,this.slots[4].values=[].concat(h,(0,c.default)(this.dises[e[1].recordId])))))))},close:function(){this.$emit("close")}}}},249:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address-selector"},[s("mt-popup",{attrs:{position:"bottom","close-on-click-modal":!1},model:{value:t.isPopUp,callback:function(e){t.isPopUp=e},expression:"isPopUp"}},[s("div",{staticClass:"tool-bar"},[s("a",{staticClass:"cancel",attrs:{href:"javascript:;"},on:{click:t.close}},[t._v("取消")]),t._v(" "),s("a",{staticClass:"ok",attrs:{href:"javascript:;"},on:{click:t.close}},[t._v("确认")])]),t._v(" "),s("mt-picker",{attrs:{slots:t.slots,"value-key":"name","show-toolbar":!1},on:{change:t.onValuesChange}})],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},250:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"create-addresses"},[s("bar-top",{attrs:{text:t.title}}),t._v(" "),s("div",{staticClass:"scroll-wrapper"},[s("div",{staticClass:"form-controller"},[s("label",{staticClass:"label"},[t._v("收货人：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.contactName,expression:"formData.contactName"}],attrs:{type:"text",placeholder:"请填写收货人姓名"},domProps:{value:t.formData.contactName},on:{input:function(e){e.target.composing||(t.formData.contactName=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-controller"},[s("label",{staticClass:"label"},[t._v("联系方式：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.contactNumber,expression:"formData.contactNumber"}],attrs:{type:"number",placeholder:"请填写收货人手机号码"},domProps:{value:t.formData.contactNumber},on:{input:function(e){e.target.composing||(t.formData.contactNumber=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-controller",on:{click:t.showPopUp}},[s("label",{staticClass:"label"},[t._v("所在地区：")]),t._v(" "),s("span",[t._v(t._s(t.addressStr))]),t._v(" "),s("i",{staticClass:"iconfont icon-more"})]),t._v(" "),s("div",{staticClass:"form-controller"},[s("label",{staticClass:"label"},[t._v("详细地址：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],attrs:{type:"text",placeholder:"请输入详细收货地址"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||(t.formData.address=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"bar-bottom"},[s("a",{attrs:{href:"javascript:;"},on:{click:t.submit}},[t._v("保存")])]),t._v(" "),s("address-selector",{attrs:{"pro-id":t.params.proId,"city-id":t.params.cityId,"dis-id":t.params.disId,popup:t.popup,fetch:t.fetch},on:{close:t.handleClose,select:function(e){t.handleSelect(e)}}})],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});
//# sourceMappingURL=8-3edcf14ad85beb4a48dc.min.js.map