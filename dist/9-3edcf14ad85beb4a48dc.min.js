webpackJsonp([9],{186:function(e,t,n){function r(e){i||n(261)}var i=!1,o=n(45)(n(262),n(264),r,null,null);o.options.__file="/Users/ransixi/Documents/ilikezu/ilikezu-web/src/views/PersonalSetting.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] PersonalSetting.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},192:function(e,t,n){"use strict";t.__esModule=!0;var r=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},193:function(e,t,n){function r(e){i||n(194)}var i=!1,o=n(45)(n(195),n(196),r,null,null);o.options.__file="/Users/ransixi/Documents/ilikezu/ilikezu-web/src/components/barTop.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] barTop.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},194:function(e,t){},195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{text:{type:String,required:!0}},methods:{back:function(){this.$router.back()}}}},196:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bar-top"},[n("i",{staticClass:"iconfont icon-back",on:{click:e.back}}),e._v(" "),n("span",[e._v(e._s(e.text))])])},staticRenderFns:[]},e.exports.render._withStripped=!0},261:function(e,t){},262:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=r(i),s=n(192),a=r(s),u=n(193),c=r(u),l=n(46),d=n(263),p=r(d),f=n(29),m=n(30);t.default={data:function(){return{title:"修改个人资料",headUri:"",nickName:""}},components:{"bar-top":c.default},computed:(0,a.default)({},(0,l.mapState)(["userInfo"])),created:function(){var e=this;this.$nextTick(function(){if(e.userInfo.recordId){var t=e.userInfo,n=t.headUri,r=t.nickName;e.headUri=n,e.nickName=r}else e.$router.push("/personal")})},methods:{jump:function(e){this.$router.push(e)},uploadHeadUri:function(){var e=this;(0,p.default)(rootOrigin+"/common/uploadPic.xhtml",{},m.Indicator).then(function(t){var n=JSON.parse(t);if(!n.isSuccess)return o.default.reject(n);e.headUri=n.data.url}).catch(function(e){e.msg?(0,f.errorTip)(e.msg):(0,f.errorTip)("上传图片失败")})},confirm:function(){var e=this,t=this.headUri,n=this.nickName;if(t===this.userInfo.headUri&&n===this.userInfo.nickName)return this.$router.push("/personal");var r={headUri:t,nickName:n};m.Indicator.open(),this.$store.dispatch("UPDATE_USER_INFO",r).then(function(t){if(!t.isSuccess)return o.default.reject(t.msg);e.$router.push("/personal"),m.Indicator.close()}).catch(function(e){(0,f.errorTip)(e),m.Indicator.close()})}}}},263:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=r(i),s=n(16),a=r(s),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=function(){var e;return[].concat((0,a.default)(document.querySelectorAll(".file-uploader-lr"))).forEach((e=document.body).removeChild.bind(e))};r();var i=null,s=t.size||20,u=t.type||"*",c=document.createElement("input");return c.setAttribute("type","file"),c.setAttribute("class","file-uploader-lr"),c.setAttribute("accept","image/*"),t.multiple&&c.setAttribute("multiple",!1),c.setAttribute("style","width: 0; height: 0; position: absolute; left: -1000px; top: -1000px;"),document.body.appendChild(c),c.click(),new o.default(function(t,o){c.addEventListener("change",function(l){if(!c.files.length)return!1;n&&n.open();var d=new FormData;if([].concat((0,a.default)(c.files)).forEach(function(e){e.size/1e3/1e3>s?i={code:0,msg:"上传文件不能大于"+s+"MB"}:u&&"*"!==u&&-1===u.split(",").indexOf(e.type.split("/")[1])?i={code:1,msg:"上传的文件格式只能是"+u}:d.append("file",e,e.name)}),i)return n&&n.close(),o(i),!1;var p=new XMLHttpRequest;p.open("POST",e,!0),p.send(d),p.addEventListener("load",function(){n&&n.close(),this.status>=400?o(this.response):t(this.response),r()})},!1)})};t.default=u},264:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"personal-setting"},[n("bar-top",{attrs:{text:e.title}}),e._v(" "),n("div",{staticClass:"scroll-wrapper"},[n("div",{staticClass:"head-uri"},[n("div",{staticClass:"image-wrapper"},[n("img",{attrs:{src:e.headUri,alt:""}}),e._v(" "),n("span",{staticClass:"mask",on:{click:e.uploadHeadUri}},[n("i",{staticClass:"iconfont icon-upload"})])])]),e._v(" "),n("div",{staticClass:"user-info"},[n("div",{staticClass:"form-controll"},[n("label",[e._v("昵称:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickName,expression:"nickName"}],attrs:{type:"text",placeholder:"请填写用户昵称"},domProps:{value:e.nickName},on:{input:function(t){t.target.composing||(e.nickName=t.target.value)}}})])])]),e._v(" "),n("div",{staticClass:"bar-bottom"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.jump("/personal")}}},[e._v("取消")]),e._v(" "),n("a",{staticClass:"confirm",attrs:{href:"javascript:;"},on:{click:e.confirm}},[e._v("提交")])])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});
//# sourceMappingURL=9-3edcf14ad85beb4a48dc.min.js.map